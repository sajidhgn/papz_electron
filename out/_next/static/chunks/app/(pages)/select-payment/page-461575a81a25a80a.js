(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{6261:function(e,t,s){Promise.resolve().then(s.bind(s,4005))},2242:function(e,t,s){"use strict";s.d(t,{Q:function(){return a}});let a={siteurl:"https://chipshop.baiggroupltd.co.uk/",printerID:"WFAtODBD",porrtName:"COM3"}},4005:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),r=s(2265),n=s(4546),i=s(8472),l=s(7223),c=s(2242);let o=async(e,t,s,a,r,n)=>{let i=await fetch(c.Q.siteurl+"api/finalizeOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:e,macAddress:t,totalBill:s,payMethod:a,payStatus:r,orderType:n})});if(!i.ok)return{status:!1,message:(await i.json()).message||"An error occurred"};let l=await i.json();return{status:!0,orderNo:l.order_no,message:l.message}};var d=s(1769),u=s(3580);s(4193);var m=s(6463);let x=async(e,t,s,a)=>{try{let e=new Date;return h(e),f(e),p(e),c.Q.printerID,{status:!0}}catch(e){return{status:!1,message:e}}},h=e=>{let t=e.getDate(),s=e.getMonth()+1,a=e.getFullYear();return"".concat(t,"/").concat(s,"/").concat(a)},p=e=>{let t=e.getHours(),s=e.getMinutes(),a=e.getSeconds();return"".concat(t,":").concat(s,":").concat(a)},f=e=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()];var g=s(9414),y=s(4379),w=s.n(y),j=s(9715),v=s(6648),b=e=>{let{src:t,type:s,height:n}=e,i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{i.current&&(i.current.playbackRate=.36)},[]),(0,a.jsx)("div",{children:(0,a.jsxs)("video",{ref:i,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{height:150|n},children:[(0,a.jsx)("source",{src:t,type:"video/".concat(s||"webm")}),"Your browser does not support the video tag."]},t)})},N=()=>{let e=(0,m.useRouter)(),[t,s]=(0,r.useState)(0),[h,p]=(0,r.useState)([]),[f,y]=(0,r.useState)([]),[N,k]=(0,r.useState)([]),[S,C]=(0,r.useState)({}),[O,I]=(0,r.useState)(""),[P,T]=(0,r.useState)([]),[B,E]=(0,r.useState)(0),[_,A]=(0,r.useState)(!1),[F,z]=(0,r.useState)({}),[D,Y]=(0,r.useState)([]),[H,M]=(0,r.useState)([]),[J,Z]=(0,r.useState)(""),[q,R]=(0,r.useState)(""),[Q,U]=(0,r.useState)(!1),[W,K]=(0,r.useState)(!0),[G,$]=(0,r.useState)(null),[L,V]=(0,r.useState)(""),[X,ee]=(0,r.useState)(!1),[et,es]=(0,r.useState)(!1),[ea,er]=(0,r.useState)(()=>()=>{}),en=(0,r.useRef)(L),[ei,el]=(0,r.useState)(!1),[ec,eo]=(0,r.useState)("");(0,r.useEffect)(()=>{ed()},[]);let ed=async()=>{localStorage.setItem("paymentMethod",JSON.stringify(null)),em(),await eu(),K(!1)},eu=async()=>!0,em=()=>{V(localStorage.getItem("orderType"));let e=JSON.parse(localStorage.getItem("totalBill"));E("#A"+e.toFixed(2).padStart(6,"0").replace(/^(\d{3})(\d{2})$/,"$1.$2")+"*"),s(e);let t=JSON.parse(localStorage.getItem("cart"));null!==t&&t||(t=[]),p(t);let a=JSON.parse(localStorage.getItem("mealCart"));null!==a&&a||(a=[]),y(a);let r=JSON.parse(localStorage.getItem("dealsCart"));null!==r&&r||(r=[]),k(r),C({single:t,meal:a,deal:r})},ex=()=>{localStorage.setItem("cart",JSON.stringify([])),localStorage.setItem("mealCart",JSON.stringify([])),localStorage.setItem("dealsCart",JSON.stringify([]))},eh=()=>new Promise(e=>{es(!0);let t=()=>{es(!1),e(en.current)};er(()=>t)}),ep=async(e,s,a)=>{let r;let n=await (0,d.Z)(),i=await o(S,n,t,e,s,a);if(r="paid"==s?"PAID":"PENDING PAYMENT",!i.status)return{status:!1,message:i.message};{let e=h.map(e=>{let t=e.choices.map(e=>{let t=e.choice_options.find(e=>1===e.status);return t?"		 - "+e.choice_name+": "+t.option_name:null}).filter(e=>null!==e),s=t.length>0?t.join(", "):"";return[e.product_name.trim()+" ("+e.selectedSize.size+") "+(s?"\n"+s:""),e.sprice,e.quantity.toString(),(e.quantity*parseFloat(e.sprice)).toFixed(2)]}),t=0,s=f.map(e=>{t++;let s="";e.main.choices&&e.main.choices.length>0&&(s=e.main.choices.map(e=>{let t=e.choice_options.find(e=>1===e.status);return t?" 	 - ".concat(e.choice_name,": ").concat(t.option_name):null}).filter(e=>null!==e).join("\n"));let a="Meal "+t+"\n"+e.main.name+" ("+e.main.selectedSize.size+")";return s&&(a+="\n"+s),[a+="\n"+e.side.name+"\n"+e.drink.name,e.sprice,e.quantity.toString(),(e.quantity*parseFloat(e.sprice)).toFixed(2)]}),a=N.map(e=>(t++,[e.name,e.sprice,e.quantity.toString(),(e.quantity*parseFloat(e.sprice)).toFixed(2)])),n=e.concat(s,a),l=0;n.forEach(e=>{l+=parseFloat(e[e.length-1])});let c=await x(n,l,i.orderNo,r);return c.status?{status:!0}:{status:!1,message:c.message}}},ef=async e=>{let t=e.split(","),s=null;return t.forEach(e=>{let[t,a]=e.split(":");"Rcvd"===t.trim()&&(s=parseFloat(a))}),!e.startsWith("Cancel_Bill")&&0!=s},eg=async(t,s)=>{if(await ef(s)){V(await eh()),U(!1),$("/assets/animations/workingOnOrder.webm"),Z("Processing Your Order"),R("This will just take a moment");let s=await ep("cash","paid");s.status?await t.close().then(t=>{ex(),A(!1),e.push("/home"),w().fire({title:"SUCCESS",html:'\n                                <strong><i>Your order has been successfully confirmed</i></strong>\n                                <div style="font-size:16px;">Please proceed to the counter get your order</div>\n                                <div style="font-size:30px;">THANK YOU!</div>\n                            ',icon:"success",timer:4e3,showConfirmButton:!1})}):await t.write("#C99*").then(async e=>{await t.close().then(e=>{u.Am.error("OOPS! ".concat(s.message," Cancelling Current Payment"),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:u.sm}),A(!1)})})}},ey=async()=>{try{let s=await i.Z.get("".concat(c.Q.siteurl,"api/v2/device.json"),{auth:{username:"eatstek_admin",password:"chpshpmngr"}});if(null==s?void 0:s.data){var e;u.Am.success("Connection successful!");let s=await i.Z.post("".concat(c.Q.siteurl,"api/v2/transactions/sale.json"),{amount:t});(null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.success)=="true"&&el(!0)}}catch(e){console.error("Error fetching device info:",e),u.Am.error("Connection failed!")}},ew=async t=>{if(H.includes(c.Q.porrtName)||1!=t){if(0==t){if(await ey(),ei){let t=await eh();V(t),Z("Putting on the final touches!"),R("We're making sure everything is just right for you."),$("/assets/animations/workingOnOrder.webm"),A(!0),await ep("counter","pending",t),ex(),e.push("/home"),w().fire({title:"SUCCESS",html:'\n                                <strong><i>Your order has been successfully confirmed</i></strong>\n                                <div style="font-size:16px;">Please proceed to the counter get your order</div>\n                                <div style="font-size:30px;">THANK YOU!</div>\n                            ',icon:"success",timer:4e3,showConfirmButton:!1})}else u.Am.error("OOPS! Cancelling Current Payment",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:u.sm}),A(!1);A(!1)}else if(1==t)try{A(!0),Z("Prepare Your Payment"),R("Add the payment amount to the cash machine"),U(!0),$("/assets/animations/addCash.webm"),await F.open(),await F.write(B),F.listen(async e=>{eg(F,e)},!0),F.read({timeout:1e3})}catch(e){u.Am.error(e,{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:u.sm})}else{let t=await eh();V(t),Z("Putting on the final touches!"),R("We're making sure everything is just right for you."),$("/assets/animations/workingOnOrder.webm"),A(!0);let s=await ep("counter","pending",t);s.status?(ex(),e.push("/home"),w().fire({title:"SUCCESS",html:'\n                                <strong><i>Your order has been successfully confirmed</i></strong>\n                                <div style="font-size:16px;">Please proceed to the counter get your order</div>\n                                <div style="font-size:30px;">THANK YOU!</div>\n                            ',icon:"success",timer:4e3,showConfirmButton:!1})):(u.Am.error("OOPS! ".concat(s.message," Cancelling Current Payment"),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:u.sm}),A(!1))}}else A(!1),u.Am.error("It seems the Cash Deposit Machine is not connected to the system. Please connect the CDM first and try again",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:u.sm})},ej=async()=>{w().fire({title:"Are you sure?",text:"You want to cancel this payment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#059669",cancelButtonColor:"#F87171",confirmButtonText:"Yes, cancel it!",cancelButtonText:"No"}).then(async e=>{e.isConfirmed&&F.write("#C99*").then(async e=>{await F.close().then(e=>{A(!1),w().fire({title:"Cancelled!",text:"Payment has been cancelled",icon:"success",timer:4e3,showConfirmButton:!1})})})})};return(0,r.useEffect)(()=>{en.current=L},[L]),(0,a.jsx)("div",{style:{backgroundImage:"url(/assets/images/backgroundInverted.jpg)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:W?(0,a.jsx)("div",{className:"w-full min-h-screen flex flex-col justify-center items-center text-slate-800",children:(0,a.jsx)(j.Z,{})}):(0,a.jsxs)(n.Z,{showNavbar:!1,children:[et&&(0,a.jsxs)("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0",children:(0,a.jsx)("div",{className:"bg-white max-w-3xl",children:(0,a.jsxs)("div",{className:"flex flex-col overflow-hidden py-6",children:[(0,a.jsx)("div",{className:"flex-grow overflow-y-auto px-12 py-6",children:(0,a.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,a.jsx)("p",{className:"capitalize text-lg",children:"How would you like to eat?"}),(0,a.jsx)("div",{className:"flex gap-8",children:"Eat In"===L?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-4 bg-black text-white flex flex-col items-center shadow-md cursor-pointer",onClick:()=>V("Eat In"),children:[(0,a.jsx)(v.default,{src:"/assets/images/dinein.png",className:"w-36",width:50,height:50,alt:"Dine In Image"}),(0,a.jsx)("p",{className:"text-xl",children:"Dine In"})]}),(0,a.jsxs)("div",{className:"p-4 bg-white flex flex-col items-center shadow-md cursor-pointer",onClick:()=>V("Takeaway"),children:[(0,a.jsx)(v.default,{src:"/assets/images/takeaway.png",className:"w-36",width:50,height:50,alt:"Takeaway Image"}),(0,a.jsx)("p",{className:"text-xl",children:"Takeaway"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-4 bg-white flex flex-col items-center shadow-md cursor-pointer",onClick:()=>V("Eat In"),children:[(0,a.jsx)(v.default,{src:"/assets/images/dinein.png",className:"w-36",width:50,height:50,alt:"Dine In Image"}),(0,a.jsx)("p",{className:"text-xl",children:"Dine In"})]}),(0,a.jsxs)("div",{className:"p-4 bg-black text-white flex flex-col items-center shadow-md cursor-pointer",onClick:()=>V("Takeaway"),children:[(0,a.jsx)(v.default,{src:"/assets/images/takeaway.png",className:"w-36",width:50,height:50,alt:"Takeaway Image"}),(0,a.jsx)("p",{className:"text-xl",children:"Takeaway"})]})]})})]})}),(0,a.jsx)("div",{className:"pt-4 flex-shrink-0 w-full px-3",children:(0,a.jsx)("button",{className:"bg-black text-white px-10 py-3 lg:py-4",onClick:ea,children:"OK"})})]})})})})]}),(0,a.jsxs)("div",{className:"main-container min-h-screen  flex flex-col items-center",children:[(0,a.jsx)(u.Ix,{stacked:!0}),_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-1 justify-center items-center",children:(0,a.jsx)("div",{className:"text-white flex flex-col",children:(0,a.jsx)(g.Z,{text1:J,text2:q,children:(0,a.jsx)(b,{src:G,height:200})})})}),(0,a.jsx)("div",{className:"p-5",children:Q&&(0,a.jsx)("div",{className:"text-white bg-red-400 flex flex-col mt-auto uppercase px-5 py-4 font-semibold cursor-pointer rounded-full",onClick:ej,children:"Cancel Payment"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-full flex justify-end items-end",children:(0,a.jsx)(l.l,{iconInvert:!0,textColor:"text-slate-200"})}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 justify-center items-center w-full gap-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("p",{className:"text-3xl text-center lg:text-3xl text-white",children:"How would you like to pay?"}),(0,a.jsxs)("p",{className:"text-2xl text-center lg:text-3xl text-white",children:["Total : ",(0,a.jsx)("span",{className:"font-semibold",children:t.toFixed(2)})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-5",children:[(0,a.jsxs)("button",{className:"flex flex-col items-center border border-1 border-gray-600 rounded p-10 bg-transparent focus:bg-black focus:border-black w-full",onClick:()=>ew(0),children:[(0,a.jsx)(b,{src:"/assets/animations/payByCard.webm"}),(0,a.jsx)("div",{className:"text-3xl text-white",children:"Pay By Card"})]}),(0,a.jsxs)("div",{className:"flex gap-5",children:[(0,a.jsxs)("button",{onClick:()=>ew(1),className:"flex flex-col items-center border border-1 border-gray-600 rounded p-10 bg-transparent focus:bg-black focus:border-black",children:[(0,a.jsx)(b,{src:"/assets/animations/payByCash.webm"}),(0,a.jsx)("div",{className:"text-3xl text-white",children:"Pay By Cash"})]}),(0,a.jsxs)("button",{onClick:()=>ew(2),className:"flex flex-col items-center border border-1 border-gray-600 rounded p-10 bg-transparent focus:bg-black focus:border-black",children:[(0,a.jsx)(b,{src:"/assets/animations/payAtCounter.webm"}),(0,a.jsx)("div",{className:"text-3xl text-white",children:"Pay At Counter"})]})]})]})]})]})]})]})})}},9715:function(e,t,s){"use strict";var a=s(7437),r=s(2265);t.Z=e=>{let{src:t}=e,s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{s.current&&(s.current.playbackRate=.36)},[]),(0,a.jsx)("div",{children:(0,a.jsxs)("video",{ref:s,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{height:150},children:[(0,a.jsx)("source",{src:t||"/assets/animations/fries.webm",type:"video/webm"}),"Your browser does not support the video tag."]})})}},7223:function(e,t,s){"use strict";s.d(t,{l:function(){return i}});var a=s(7437),r=s(6463);s(2265);var n=s(6648);let i=e=>{let{title:t="Take Me Back",onClick:s,background:i="bg-transparent",textColor:l="bg-dark",iconInvert:c=!1}=e,o=(0,r.useRouter)();return(0,a.jsx)("div",{className:"flex w-100 justify-end px-12 pt-10 ".concat(i," ").concat(l),children:(0,a.jsxs)("button",{className:"flex items-center",onClick:()=>{s?s():o.back()},children:[(0,a.jsx)("div",{className:"icon px-1",children:(0,a.jsx)(n.default,{src:"/assets/images/goBack.svg",height:20,width:20,alt:"Go Back Button",className:c&&"invert"})}),(0,a.jsx)("div",{className:"font-semibold",children:t})]})})}},4546:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(7437),r=s(6648),n=s(2265),i=()=>{let[e,t]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=localStorage.getItem("orderType");e||(e="Eat In",localStorage.setItem("orderType",JSON.stringify(e))),t(e)},[]);let s=e=>{t(e),localStorage.setItem("orderType",e)};return(0,a.jsx)("div",{className:"w-full p-5 flex justify-center gap-2",children:"Eat In"===e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-40 h-14 cursor-pointer bg-black text-white content-center text-center rounded-full",onClick:()=>s("Eat In"),children:"Eat In"}),(0,a.jsx)("div",{className:"w-40 h-14 cursor-pointer border border-black content-center text-center rounded-full",onClick:()=>s("Takeaway"),children:"Takeaway"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-40 h-14 cursor-pointer border border-black content-center text-center rounded-full",onClick:()=>s("Eat In"),children:"Eat In"}),(0,a.jsx)("div",{className:"w-40 h-14 cursor-pointer bg-black text-white content-center text-center rounded-full",onClick:()=>s("Takeaway"),children:"Takeaway"})]})})},l=()=>(0,a.jsxs)("nav",{className:"navbar flex flex-col justify-between px-5 items-center pb-5 pt-10 sticky top-0 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between items-center",children:[(0,a.jsx)("div",{className:"logo-img",children:(0,a.jsx)(r.default,{src:"/assets/images/logo.png",alt:"LOGO",className:"w-20",height:100,width:200})}),(0,a.jsxs)("div",{className:"title flex",children:[(0,a.jsx)("div",{className:"home-icon"}),(0,a.jsx)("p",{className:"text-xl uppercase",children:"Papaz Pizza"})]})]}),(0,a.jsx)(i,{})]}),c=e=>{let{children:t,showNavbar:s=!0}=e;return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[s&&(0,a.jsx)(l,{}),(0,a.jsx)("div",{className:"flex-1 flex flex-col",children:t})]})}},9414:function(e,t,s){"use strict";var a=s(7437),r=s(172),n=s.n(r);t.Z=e=>{let{text1:t,text2:s,children:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[r||(0,a.jsx)("div",{className:"".concat(n().square7)}),(0,a.jsx)("div",{className:"text-3xl uppercase",children:t}),(0,a.jsx)("div",{className:"text-2xl",children:s})]})}},1769:function(e,t){"use strict";let s=async()=>"mac";t.Z=s},172:function(e){e.exports={square7:"loader_square7__3Qg_E",s7:"loader_s7__hhpHf"}}},function(e){e.O(0,[872,461,595,472,127,971,23,744],function(){return e(e.s=6261)}),_N_E=e.O()}]);